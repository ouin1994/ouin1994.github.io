"use strict";layui.use("element",function(){layui.element}),setTimeout(function(){getCookie("userLogin")&&($(".login a").html("战盟用户"),$("#register a").html("退出"))},500),$(document).on("click",".login",function(){getCookie("userLogin")||layui.use("layer",function(){layui.layer.open({type:1,title:!1,closeBtn:0,shadeClose:!0,skin:"yourclass",content:' \n                        <div class="login-tab">\n                            <div class="layui-tab layui-tab-brief login-box">\n                                <ul class="layui-tab-title tab-menu-login">\n                                    <li>战盟快捷登录</li>\n                                    <li class="layui-this">战盟账号登录</li>\n                                </ul>\n                                <div class="layui-tab-content">\n                                    <div class="layui-tab-item   login-code">\n                                        <div class="fastLogin">\n                                            <div class="img">\n                                                <img src="data:image/gif;base64,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"\n                                                    alt="">\n                                            </div>\n                                            <p class="text">使用<span>多益战盟APP</span>扫码安全登录</p>\n                                        </div>\n                                        <div class="link-menu">\n                                            <a href="">下载多益战盟</a>\n                                            <span>|</span>\n                                            <a href="#" class="btn-register">注册战盟账号</a>\n                                            <span>|</span>\n                                            <a href="">忘记密码</a>\n                                        </div>\n                                    </div>\n                                    <div class="layui-tab-item layui-show login-code">\n                                        <div class="passLogin">\n                                            <div class="ipt-box" id="ipt-box-account">\n                                                <label for="account" class="field-icon">\n                                                    <i class="icon icon-email"></i>\n                                                </label>\n                                                <input type="text" placeholder="战盟账号" autocomplete="off" id="account" class="ipt-txt">\n                                                <span></span>\n                                                <p class="error uer-error"></p>\n                                            </div>\n                                            <div class="ipt-box" id="ipt-box-password">\n                                                <label for="password" class="field-icon">\n                                                    <i class="icon icon-email"></i>\n                                                </label>\n                                                <input type="text" placeholder="密码" autocomplete="off" id="password" class="ipt-txt">\n                                                <span></span>\n                                                <p class="error pass-error"></p>\n                                            </div>\n                                            <div class="ipt-w hide" id="ipt-w-captcha">\n                                               \n                                            </div>\n                                            <div style="margin-top:33px">\n                                                <input type="button" value="登 录" id="btn-login" class="u-btn">\n                                            </div>\n                                            <div class="link-menu">\n                                                <a href="">下载多益战盟</a>\n                                                <span>|</span>\n                                                <a href="#" id="btn-register">注册战盟账号</a>\n                                                <span>|</span>\n                                                <a href="">忘记密码</a>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        ',area:["460px","536px"]})})}),$(document).on("click","#register",function(){getCookie("userLogin")||layui.use("layer",function(){layui.layer.open({type:1,title:!1,closeBtn:0,shadeClose:!0,skin:"yourclass",area:["460px","557px"],content:'\n                    <div class="register">\n                        <div class="title">注册战盟账号</div>\n                            <div class="nav">\n                                <span>普通账号</span>\n                            </div>\n                        <div class="register-box">\n                            <div class="username">\n                                <span class="name">账号</span>\n                                <input type="text" autocomplete="off" placeholder="请输入手机号或常用邮箱" class="write" id="username"\n                                    autofocus="autofocus">\n                                <span class="icon error"></span>\n                                <p class="text">请确保邮箱真实有效，用于注册后的验证</p>\n                            </div>\n                            <div class="yanzheng hide">\n                                <p class="name">完成验证</p>\n                                <span class="btn-captcha"><a href="#">点击按钮完成验证</a></span>\n                            </div>\n                            <div class="phone hide">\n                                <span class="name">手机验证码</span>\n                                <input type="text" autocomplete="off" placeholder="请输入手机验证码" class="write" style="width:150px">\n                                <button class="u-btn btn-getCode">获取验证码</button>\n                            </div>\n                            <div class="password">\n                                <span class="name">登录密码</span>\n                                <input type="text" autocomplete="off" placeholder="请输入6-16位数字或字母" class="write" id="loginPass">\n                                <span class="icon error"></span>\n                                <p class="text"></p>\n                            </div>\n                            <div class="password-two">\n                                <span class="name">确认密码</span>\n                                <input type="text" autocomplete="off" placeholder="请再次输入登录密码" class="write" id="passEnter">\n                                <span class="icon error"></span>\n                                <p class="text"></p>\n                            </div>\n                            <div class="protocol">\n                                <label for="">\n                                    <span>\n                                        <input checked type="checkbox" id="agree" class="ipt-chk">\n                                    </span>\n                                    已阅读并同意\n                                    <a href="" class="link" target="_blank">服务条款</a>\n                                </label>\n                            </div>\n                            <div class="submit">\n                                <input type="button" value="立即注册" class="u-btn btn-register">\n                            </div>\n                        </div>\n                    </div>'})}),getCookie("userLogin")&&(removeCookie("userLogin"),console.log(666),$(".login a").html("登录"),$("#register a").html("注册"))}),$(document).on("click","#btn-register",function(){layui.use("layer",function(){layui.layer.closeAll()}),$("#register").trigger("click")}),$(document).on("click","#btn-login",function(){if(/^(1\d{10})$|^(\w+@\w+(\.\w+)+)$/gi.test($("#account").val())){$(".uer-error").html("");var a=$("#account").val(),l=$("#password").val();$.ajax({type:"get",url:"http://"+(-1<location.host.indexOf(":5500")?"localhost":location.host)+"/project/login.php",data:{username:a,password:l},dataType:"json",success:function(l){l.data?(layui.use("layer",function(){layui.layer.closeAll()}),setCookie("userLogin",a,7),setTimeout(function(){getCookie("userLogin")&&($(".login a").html("战盟用户"),$("#register a").html("退出"))},1e3)):layui.use("layer",function(){layui.layer.msg(l.msg)})}})}else $(".uer-error").html("用户名或密码错误")});var flag=!1,flag1=!1,flag2=!1;$(document).on("blur","#username",function(){flag=/^(1\d{10})|(\w+@\w+(\.\w+)+)$/gi.test(this.value)?($(this).next().html("√").css({color:"green"}).next().html(""),!0):($(this).siblings("p").html("请输入正确的手机号或邮箱").css({color:"red"}),!1)}),$(document).on("blur","#loginPass",function(){flag1=/^[A-Za-z][a-zA-Z0-9]{5,15}$/gi.test(this.value)?($(this).next().html("√").css({color:"green"}),$(this).siblings("p").html(""),!0):($(this).siblings("p").html("密码包含非法字符").css({color:"red"}),$(this).next().html(""),!1)}),$(document).on("blur","#passEnter",function(){flag2=this.value==$("#loginPass").val()&&""!=this.value?($(this).next().html("√").css({color:"green"}),$(this).siblings("p").html(""),!0):($(this).siblings("p").html("两次密码不一致").css({color:"red"}),$(this).next().html(""),!1)}),$(document).on("click",".btn-register",function(){if(flag&&flag1&&flag2&&$("#agree")[0].checked){var l=$("#username").val(),a=$("#loginPass").val();$.ajax({type:"get",url:"http://"+(-1<location.host.indexOf(":5500")?"localhost":location.host)+"/project/register.php",data:{username:l,password:a},dataType:"json",success:function(l){l.data?layui.use("layer",function(){var l=layui.layer;l.closeAll(),$(".login").trigger("click"),l.msg("注册成功!请登录")}):layui.use("layer",function(){layui.layer.msg(l.msg)})}})}else layui.use("layer",function(){layui.layer.msg("请注意红色提示文字")})}),$(document).on("click",".cart",function(){getCookie("userLogin")?location.href="/html/goods-cart.html":$(".login").trigger("click")});