(this.webpackJsonpdestiny=this.webpackJsonpdestiny||[]).push([[18],{1215:function(e,t,a){"use strict";a.r(t);var n=a(21),o=a(22),r=a(24),l=a(23),s=a(0),c=a.n(s),i=(a(672),a(1187)),u=a(669),d=a(66),m=a(151),g=a(139),f=(a(731),/^1(3|4|5|7|8|9)[0-9]{9}$/),p=/^\d{4}$/,h=null,b=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(n.a)(this,a);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={codeFlag:!1,loginFlag:!1,toggleFlag:!0,txt:"\u53d1\u9001\u9a8c\u8bc1\u7801",count:60},e.handleSubmit=function(t){t.preventDefault(),e.props.form.validateFields((function(t,a){t||(g.a.post("/react/checkCode",a).then((function(t){t.data.type?(sessionStorage.token=t.data.token,sessionStorage.mobile=e.mobile.state.value,e.props.history.push("/destiny")):(sessionStorage.token="",sessionStorage.mobile="")})),console.log("Received values of form: ",a))}))},e.handleCheckMobile=function(t){var a=t.target.value,n=e.code.state.value;e.state.toggleFlag&&e.setState({codeFlag:f.test(a),loginFlag:f.test(a)&&p.test(n)})},e.handleCheckCode=function(t){var a=t.target.value;e.setState({loginFlag:p.test(a)})},e.start=function(){if(e.state.count>1){var t=e.state.count;--t,e.setState({count:t,txt:"\u5269\u4f59 ".concat(e.state.count," S"),codeFlag:!1,toggle:!1})}else clearInterval(h),h=null,e.setState({count:60,txt:"\u53d1\u9001\u9a8c\u8bc1\u7801",codeFlag:!0,toggle:!0})},e.computedTime=function(){e.start(),h=setInterval(e.start,1e3)},e.handleSendCode=function(){var t=e.mobile.state.value;e.computedTime(),g.a.post("/react/sendSms",{mobile:t}).then((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.codeFlag,o=a.loginFlag,r=a.txt;return c.a.createElement(i.a,{onSubmit:this.handleSubmit,className:"login-form"},c.a.createElement(i.a.Item,null,t("mobile",{rules:[{required:!0,message:"Please input your mobile!"}]})(c.a.createElement(u.a,{prefix:c.a.createElement(d.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Mobile",onChange:this.handleCheckMobile,ref:function(t){return e.mobile=t}}))),c.a.createElement(i.a.Item,null,t("code",{rules:[{required:!0,message:"Please input your Code!"}]})(c.a.createElement("div",{className:"code"},c.a.createElement(u.a,{prefix:c.a.createElement(d.a,{type:"code",style:{color:"rgba(0,0,0,.25)"}}),type:"text",placeholder:"Code",className:"codeInput",ref:function(t){return e.code=t},onChange:this.handleCheckCode}),c.a.createElement(m.a,{type:"danger",onClick:this.handleSendCode,disabled:!n,className:"login-form-button code-btn"},r)))),c.a.createElement(i.a.Item,null,c.a.createElement(m.a,{type:"primary",disabled:!o,htmlType:"submit",className:"login-form-button submit-btn"},"Log in")))}}]),a}(c.a.Component),v=i.a.create({name:"normal_login"})(b),y=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"login"},c.a.createElement("div",{className:"flex login-header"},c.a.createElement("div",{className:"login-header-logo"},"Destiny"),c.a.createElement("div",{className:"login-header-href"},c.a.createElement("a",{target:"_blank",href:"https://github.com/ouin1994/ouin1994.github.io",rel:"noopener noreferrer"},"GitHub"))),c.a.createElement("div",{className:"flex login-content"},c.a.createElement("div",{className:"outbox"},c.a.createElement("div",{className:"title"},c.a.createElement("p",null,"\u767b\u5f55")),c.a.createElement("div",{className:"Box"},c.a.createElement(v,this.props)))))}}]),a}(s.Component);t.default=y},139:function(e,t,a){"use strict";var n=a(364),o=a.n(n),r=a(1212),l="https://ook.life:1993/";function s(e){r.a.warning(e,1,(function(){r.a.destroy(),console.log(e)}))}function c(e){r.a.destroy(),r.a.success(e,1,(function(){}))}o.a.defaults.baseURL=l,o.a.defaults.headers.common.token="",o.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",o.a.interceptors.request.use((function(e){var t,a;return t=t||"\u8bf7\u6c42\u4e2d...",a=a||1,r.a.loading(t,a,(function(){r.a.destroy(),console.log(t)})),e}),(function(e){var t;return t="\u8bf7\u6c42\u5931\u8d25-\u7f51\u7edc\u5f02\u5e38",r.a.error(t,1,(function(){r.a.destroy()})),Promise.reject(e)})),o.a.interceptors.response.use((function(e){return console.log(e),e.data.type?c(e.data.msg):0===e.data.type?s(e.data.msg):c(e.data.msg),e}),(function(e){return s("\u54cd\u5e94\u5931\u8d25-\u670d\u52a1\u5668\u5f02\u5e38"),Promise.reject(e)})),a.d(t,"a",(function(){return o.a})),a.d(t,"b",(function(){return l}))},672:function(e,t,a){},731:function(e,t,a){}}]);
//# sourceMappingURL=18.598c1de7.chunk.js.map