(this.webpackJsonpdestiny=this.webpackJsonpdestiny||[]).push([[18],{1225:function(e,t,a){"use strict";a.r(t);var n=a(22),o=a(23),l=a(25),r=a(24),s=a(26),c=a(0),i=a.n(c),u=(a(675),a(1196)),d=a(672),m=a(71),g=a(155),f=a(144),p=(a(734),/^1(3|4|5|7|8|9)[0-9]{9}$/),h=/^\d{4}$/,b=null,v=function(e){function t(){var e,a;Object(n.a)(this,t);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return(a=Object(l.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(s)))).state={codeFlag:!1,loginFlag:!1,toggleFlag:!0,txt:"\u53d1\u9001\u9a8c\u8bc1\u7801",count:60},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields((function(e,t){e||(f.a.post("/react/checkCode",t).then((function(e){e.data.type?(sessionStorage.token=e.data.token,sessionStorage.mobile=a.mobile.state.value,a.props.history.push("/destiny")):(sessionStorage.token="",sessionStorage.mobile="")})),console.log("Received values of form: ",t))}))},a.handleCheckMobile=function(e){var t=e.target.value,n=a.code.state.value;a.state.toggleFlag&&a.setState({codeFlag:p.test(t),loginFlag:p.test(t)&&h.test(n)})},a.handleCheckCode=function(e){var t=e.target.value;a.setState({loginFlag:h.test(t)})},a.start=function(){if(a.state.count>1){var e=a.state.count;--e,a.setState({count:e,txt:"\u5269\u4f59 ".concat(a.state.count," S"),codeFlag:!1,toggle:!1})}else clearInterval(b),b=null,a.setState({count:60,txt:"\u53d1\u9001\u9a8c\u8bc1\u7801",codeFlag:!0,toggle:!0})},a.computedTime=function(){a.start(),b=setInterval(a.start,1e3)},a.handleSendCode=function(){var e=a.mobile.state.value;a.computedTime(),f.a.post("/react/sendSms",{mobile:e}).then((function(e){console.log(e)}))},a}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.codeFlag,o=a.loginFlag,l=a.txt;return i.a.createElement(u.a,{onSubmit:this.handleSubmit,className:"login-form"},i.a.createElement(u.a.Item,null,t("mobile",{rules:[{required:!0,message:"Please input your mobile!"}]})(i.a.createElement(d.a,{prefix:i.a.createElement(m.a,{type:"phone",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Mobile",onChange:this.handleCheckMobile,ref:function(t){return e.mobile=t}}))),i.a.createElement(u.a.Item,null,t("code",{rules:[{required:!0,message:"Please input your Code!"}]})(i.a.createElement("div",{className:"code"},i.a.createElement(d.a,{prefix:i.a.createElement(m.a,{type:"code",style:{color:"rgba(0,0,0,.25)"}}),type:"text",placeholder:"Code",className:"codeInput",ref:function(t){return e.code=t},onChange:this.handleCheckCode}),i.a.createElement(g.a,{type:"danger",onClick:this.handleSendCode,disabled:!n,className:"login-form-button code-btn"},l)))),i.a.createElement(u.a.Item,null,i.a.createElement(g.a,{type:"primary",disabled:!o,htmlType:"submit",className:"login-form-button submit-btn"},"Log in")))}}]),t}(i.a.Component),y=u.a.create({name:"normal_login"})(v),E=function(e){function t(){return Object(n.a)(this,t),Object(l.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"login"},i.a.createElement("div",{className:"flex login-header"},i.a.createElement("div",{className:"login-header-logo"},"Destiny"),i.a.createElement("div",{className:"login-header-href"},i.a.createElement("a",{target:"_blank",href:"https://github.com/chengllNice",rel:"noopener noreferrer"},"GitHub"))),i.a.createElement("div",{className:"flex login-content"},i.a.createElement("div",{className:"outbox"},i.a.createElement("div",{className:"title"},i.a.createElement("p",null,"\u767b\u5f55")),i.a.createElement("div",{className:"Box"},i.a.createElement(y,this.props)))))}}]),t}(c.Component);t.default=E},144:function(e,t,a){"use strict";var n=a(367),o=a.n(n),l=a(1222),r="https://ook.life:1993/";function s(e){l.a.warning(e,1,(function(){l.a.destroy(),console.log(e)}))}function c(e){l.a.destroy(),l.a.success(e,1,(function(){}))}o.a.defaults.baseURL=r,o.a.defaults.headers.common.token="",o.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",o.a.interceptors.request.use((function(e){var t,a;return t=t||"\u8bf7\u6c42\u4e2d...",a=a||1,l.a.loading(t,a,(function(){l.a.destroy(),console.log(t)})),e}),(function(e){var t;return t="\u8bf7\u6c42\u5931\u8d25-\u7f51\u7edc\u5f02\u5e38",l.a.error(t,1,(function(){l.a.destroy()})),Promise.reject(e)})),o.a.interceptors.response.use((function(e){return console.log(e),e.data.type?c(e.data.msg):0===e.data.type?s(e.data.msg):c(e.data.msg),e}),(function(e){return s("\u54cd\u5e94\u5931\u8d25-\u670d\u52a1\u5668\u5f02\u5e38"),Promise.reject(e)})),a.d(t,"a",(function(){return o.a})),a.d(t,"b",(function(){return r}))},675:function(e,t,a){},734:function(e,t,a){}}]);
//# sourceMappingURL=18.80735fb2.chunk.js.map